(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5/k9":function(e,t,n){"use strict";n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return h}));var r=n("kD0k"),a=n.n(r),o=(n("ls82"),n("/S4K")),u=n("YwZP"),s=n("u661"),i={"user/wrong-password":"Senha incorreta","user/not-found":"Usuário não encontrado"},c="user/wrong-password",p="user/not-found";function l(e){var t=e.ida,n=e.token,r=e.user;window.localStorage.setItem("ida@id",t),window.localStorage.setItem("ida@token",n);var a=window.localStorage.getItem("ida@users")||"{}",o=JSON.parse(a).users||[],u=o.findIndex((function(e){return e.ida===t})),s={ida:t,token:n,user:r};-1!==u?o.splice(u,1,s):o.push(s),window.localStorage.setItem("ida@users",JSON.stringify({users:o}))}var d=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,u,d,f,m,h,v,g,w,b,k,x;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.password,o=t.setErrors,u=t.setLoading,d=t.appSource,u(!0),o({}),e.prev=3,e.next=6,Object(s.f)({username:n,password:r});case 6:f=e.sent,e.next=23;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0.response&&e.t0.response.data&&e.t0.response.data.error)){e.next=21;break}m=e.t0.response.data.error,e.t1=m,e.next=e.t1===c?16:e.t1===p?18:20;break;case 16:return o({password:i[m]}),e.abrupt("return");case 18:return o({username:i[m]}),e.abrupt("return");case 20:return e.abrupt("return");case 21:throw u(!1),e.t0;case 23:f.data&&(console.log(f),h=f.data,v=h.ida,g=h.token,w=h.username,b=h.phone,k=h.email,x=JSON.stringify({username:w,ida:v,token:g,phone:b,email:k}),l({ida:v,token:g,user:{username:w}}),d&&d.postMessage(x,"*")),o({}),u(!1);case 26:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o,i,c,p,l,d,f;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,r=t.ida,o=t.token,i=t.appSource,e.prev=1,e.next=4,Object(s.h)(o);case 4:c=e.sent,e.next=11;break;case 7:throw e.prev=7,e.t0=e.catch(1),Object(u.navigate)("/signin/auth",{state:{username:n}}),e.t0;case 11:p=c.data,l=p.email,d=p.phone,f=JSON.stringify({ida:r,token:o,username:n,email:l,phone:d}),console.log("has app source?",!!i),i&&i.postMessage(f,"*");case 15:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.email,r=t.setEmailError,/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(n)){e.next=5;break}return r("Informe um e-mail válido"),e.abrupt("return");case 5:return r(""),e.prev=6,e.next=9,Object(s.a)(n);case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(6),console.log(e.t0),e.t0;case 15:Object(u.navigate)("/forget-password/sent-email",{state:{email:n}});case 16:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t){var n,r,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.phone,r=t.setValidPhone,a=void 0,a=n.replace(/\W/g,""),o=/^\+[0-9]{9,}$/.test("+55"+a),n){e.next=5;break}return r(o),e.abrupt("return");case 5:return r(o),e.prev=6,e.next=9,Object(s.a)(n);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),e.t0;case 14:case"end":return e.stop()}var a}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}()},QeBL:function(e,t,n){"use strict";n.r(t);var r=n("q1tI"),a=n.n(r),o=n("YwZP"),u=n("vOnD"),s=n("E2os"),i=n("1Jss"),c=n("H8eV"),p=n("zbC1"),l=u.default.img.withConfig({displayName:"avatarstyle__AvatarComponent",componentId:"bmp6q7-0"})(["width:44px;height:44px;border-radius:",";object-fix:cover;user-select:none;"],(function(e){return e.theme.borderRadius.circular})),d=u.default.div.withConfig({displayName:"avatarstyle__InitialUsername",componentId:"bmp6q7-1"})(["display:flex;align-items:center;justify-content:center;width:44px;height:44px;border-radius:",";background-color:",";font-style:",";font-weight:",";font-size:",";line-height:1em;text-transform:uppercase;color:",";"],(function(e){return e.theme.borderRadius.circular}),(function(e){return e.theme.neutralColor[1]}),(function(e){return e.theme.fontFamily.primary}),(function(e){return e.theme.fontWeight.bold}),(function(e){return e.theme.fontSize.sm}),(function(e){return e.theme.brandColor.primary.darkest})),f=function(e){var t=e.username,n=e.uri;return n?function(e,t){return a.a.createElement(l,{src:e,alt:"Essa é a imagem de avatar do "+t})}(n,t):function(e){return a.a.createElement(d,null,e[0],e[1])}(t)},m=u.default.div.withConfig({displayName:"user-cardstyle__CardWrapper",componentId:"sc-4colhu-0"})(["display:grid;grid-template-columns:44px 1fr;align-items:center;grid-gap:16px;cursor:pointer;& + &{margin-top:16px;}"]),h=function(e){var t=e.id,n=e.token,r=e.username,o=e.avatarURI,u=e.onClick;return a.a.createElement(m,{onClick:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return u(n,t,r)}))},a.a.createElement(f,{username:r,uri:o}),a.a.createElement(s.Text,null,r))},v=n("5/k9"),g=n("wNa6"),w=u.default.header.withConfig({displayName:"pages__Header",componentId:"sc-12s69b8-0"})(["margin-bottom:",";"],(function(e){return e.theme.spacingStack.xxs})),b=u.default.div.withConfig({displayName:"pages__DescriptionWrapper",componentId:"sc-12s69b8-1"})(["",""],(function(e){return"\n    margin-bottom: "+e.theme.spacingStack.xxs+";\n  "})),k=u.default.ul.withConfig({displayName:"pages__UserList",componentId:"sc-12s69b8-2"})(["margin-top:",";margin-bottom:",";"],(function(e){return e.theme.spacingStack.xs}),(function(e){return e.theme.spacingStack.xs}));t.default=function(){var e=Object(r.useContext)(g.a),t=e.appName,n=e.appSource,u=Object(o.useNavigate)(),l=Object(r.useState)([]),d=l[0],f=l[1];Object(r.useEffect)((function(){var e=window.localStorage.getItem("ida@users")||"{}",t=JSON.parse(e).users||[];t.length<1?u("/signin"):f(t.map((function(e){return{id:e.ida,token:e.token,username:e.user.username,avatarURI:null}})))}),[]);return a.a.createElement(i.a,null,a.a.createElement(c.a,{title:"Authentication"}),a.a.createElement(w,null,a.a.createElement(p.a,null)),a.a.createElement(b,null,a.a.createElement(s.SmallText,null,"Entre no "+t+" através IDa!")),a.a.createElement(s.Subtitle,{type:"h3"},"Escolha uma conta para continuar"),a.a.createElement(k,null,function(e,t){return e.map((function(e){var n=e.username,r=e.avatarURI,o=e.id,u=e.token;return a.a.createElement(h,{key:o,id:o,token:u,onClick:t,username:n,avatarURI:r})}))}(d,(function(e,t,r){Object(v.a)({username:r,token:e,ida:t,appSource:n})}))),a.a.createElement(s.ButtonText,{white:!0,small:!0,onClick:function(){u("/signin/auth/")}},"Entrar com outra conta"))}},u661:function(e,t,n){"use strict";n.d(t,"f",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return p})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"e",(function(){return h}));var r=n("kD0k"),a=n.n(r),o=(n("ls82"),n("/S4K")),u=n("vDqi"),s=n.n(u),i=function(e){var t=e.username,n=e.password;return s.a.post("http://localhost:3001/login",{username:t,password:n},{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}})},c=function(e){var t=e.username,n=e.password;return s.a.post("http://localhost:3001/signup",{username:t,password:n})},p=function(e){return s.a.post("http://localhost:3001/validate-token",{token:e},{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}})},l=function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("http://localhost:3001/request-reset-password",{input:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("http://localhost:3001/send-email-validation",{ida:t,email:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("http://localhost:3001/validate-email-token",{ida:t,token:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("http://localhost:3001/phone-generate-code",{ida:t,phone:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(a.a.mark((function e(t,n){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.a.post("http://localhost:3001/phone-validate-code",{ida:t,code:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=component---src-pages-index-tsx-a29a857e897e1779581d.js.map